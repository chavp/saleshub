angular.module("salesHubApp",["ngRoute","ngSanitize","ngMessages","Warehouse","localstorage","angularMoment","RegisterController","LoginController","ForgotController","InboxController","LeadsController","OpportunitiesController","SettingsController","LeadprofileController","ReportsController","ReportexplorerController","NewleadController","bulkController","OrganizationsController","EmailSettingsController"]).run(function(e){e.formForgotDone=!1,e.csvFile="",e._status=!1,e._element="",e.DashboardInboxCounter=0,e.firstName="",e.lastName="",e.orgTitle="",e.Useremail="",e.Userphone="",e.UserImg="",e.loader=function(){alert("hi"),$("#loader").remove(),1==e._status&&(alert("adding"),$('<img id="loader" src="/images/loader.gif" style="max-height:20px;border:none;"/>').insertAfter(e._element)),e.$apply()}}),angular.module("salesHubApp",["ngRoute"]).run(function(e,t){t.get("views/templates/login.html",{cache:e}),t.get("views/templates/forgotpassword.html",{cache:e}),t.get("views/templates/register.html",{cache:e}),t.get("views/templates/inbox.html",{cache:e}),t.get("views/templates/done.html",{cache:e}),t.get("views/templates/future.html",{cache:e}),t.get("views/templates/allleads.html",{cache:e}),t.get("views/templates/opportunities.html",{cache:e}),t.get("views/templates/leadprofile.html",{cache:e}),t.get("views/templates/bulk.html",{cache:e}),t.get("views/templates/activity.html",{cache:e}),t.get("views/templates/sentemails.html",{cache:e}),t.get("views/templates/statuschanges.html",{cache:e}),t.get("views/templates/explorer.html",{cache:e}),t.get("views/templates/settings.html",{cache:e}),t.get("views/templates/organization.html",{cache:e}),t.get("views/templates/phonesetting.html",{cache:e}),t.get("views/templates/emailsetting.html",{cache:e}),t.get("views/templates/emailtemplatesetting.html",{cache:e}),t.get("views/templates/newtemplate.html",{cache:e}),t.get("views/templates/apisetting.html",{cache:e}),t.get("views/templates/customizationsetting.html",{cache:e}),t.get("views/templates/membersetting.html",{cache:e}),t.get("views/templates/billingsetting.html",{cache:e}),t.get("views/templates/bulk2.html",{cache:e}),t.get("views/templates/accept.html",{cache:e}),t.get("views/templates/replyemail.html",{cache:e}),t.get("views/templates/replyinbox.html",{cache:e})});var config=function(e){e.when("/",{controller:"LoginController",templateUrl:"views/templates/login.html"}).when("/Users/:invitationURL",{controller:"LoginController",templateUrl:"views/templates/login.html"}).when("/forgot",{controller:"ForgotController",templateUrl:"views/templates/forgotpassword.html"}).when("/invitations/:org/:email",{controller:"InvitationsController",templateUrl:"views/templates/accept.html"}).when("/register",{controller:"RegisterController",templateUrl:"views/templates/register.html"}).when("/inbox",{controller:"InboxController",templateUrl:"views/templates/inbox.html"}).when("/inbox/done",{controller:"DoneController",templateUrl:"views/templates/done.html"}).when("/inbox/future",{controller:"FutureController",templateUrl:"views/templates/future.html"}).when("/leads/:query?",{controller:"LeadsController",templateUrl:"views/templates/allleads.html"}).when("/opportunities",{controller:"OpportunitiesController",templateUrl:"views/templates/opportunities.html"}).when("/leadprofile/:leadId?/:action?",{controller:"LeadprofileController",templateUrl:"views/templates/leadprofile.html"}).when("/bulk",{controller:"bulkController",templateUrl:"views/templates/bulk.html"}).when("/bulk/review",{controller:"bulkreviewController",templateUrl:"views/templates/bulk2.html"}).when("/reports/activity",{controller:"ReportsController",templateUrl:"views/templates/activity.html"}).when("/reports/sentemails",{controller:"ReportsController",templateUrl:"views/templates/sentemails.html"}).when("/reports/statuschanges",{controller:"ReportsController",templateUrl:"views/templates/statuschanges.html"}).when("/reports/explorer",{controller:"ReportexplorerController",templateUrl:"views/templates/explorer.html"}).when("/settings/accountsetting",{controller:"SettingsController",templateUrl:"views/templates/settings.html"}).when("/settings/organization",{controller:"OrganizationsController",templateUrl:"views/templates/organization.html"}).when("/settings/phonesetting",{controller:"SettingsController",templateUrl:"views/templates/phonesetting.html"}).when("/settings/emailsetting",{controller:"SettingsController",templateUrl:"views/templates/emailsetting.html"}).when("/settings/emailtemplatesetting",{controller:"EmailSettingsController",templateUrl:"views/templates/emailtemplatesetting.html"}).when("/settings/emailtemplatesetting/newtemplate/:templateId?",{controller:"EmailSettingsController",templateUrl:"views/templates/newtemplate.html"}).when("/settings/apisetting",{controller:"SettingsController",templateUrl:"views/templates/apisetting.html"}).when("/settings/customizationsetting",{controller:"SettingsController",templateUrl:"views/templates/customizationsetting.html"}).when("/settings/membersetting",{controller:"SettingsController",templateUrl:"views/templates/membersetting.html"}).when("/settings/billingsetting",{controller:"SettingsController",templateUrl:"views/templates/billingsetting.html"}).otherwise({redirectTo:"/"})};angular.module("salesHubApp").config(config),angular.module("salesHubApp").factory("Warehouse",function(){var e="http://127.0.0.1/warehouse";return{CallApi:function(t,l,o,r){var n=$.ajax({type:l,data:o,url:e+t,cache:r,statusCode:{401:function(){$(document).trigger("error_401_unauthorized")},500:function(){$(document).trigger("error_500_unauthorized")}}});return n}}}),angular.module("salesHubApp").factory("localstorage",function(e){return{set:function(t,l){e.localStorage.setItem(t,l)},get:function(t,l){return e.localStorage.getItem(t)||l},setObject:function(t,l){e.localStorage.setItem(t,JSON.stringify(l))},getObject:function(t){return JSON.parse(e.localStorage.getItem(t)||"{}")},clear:function(){e.localStorage.clear()},resetObject:function(t,l){e.localStorage.setItem(t,JSON.stringify(l))}}}),angular.module("salesHubApp").controller("LoginController",function(e,t,l,o){e.text="login page",e.email="",e.password="",e.afterLoginError="",e.resetPasswordMode=!1,void 0!==t.invitationURL&&(e.userType=t.type,e.userId=t.invitationURL.substring(5),e.resetPasswordMode=!0),e.loginForm=function(t){if(e.afterLoginError="",angular.forEach(e.login.$error.required,function(e){e.$setDirty()}),t.$valid){var r={Email:e.email,Password:e.password},n=o.CallApi("/login","POST",r,!1);n.error(function(e){e.readyState&&console.log("connection error")}),n.done(function(t,o,r){if(100==t.type)console.log(t.type),l.setObject("currentUser",t.data),console.log(l.getObject("currentUser")),window.location="/dashboard.html#/inbox";else if(t.message)console.log(t.message),e.afterLoginError="Invalid email  or password.",e.$apply();else{for(var n=0;n<t.errors.length;n++)e.afterLoginError=t.errors[n].message;e.$apply()}})}},e.resetForm=function(t){if(angular.forEach(e.reset.$error.required,function(e){e.$setDirty()}),t.$valid){var l={id:e.userId,newpassword:e.password},r=o.CallApi("/user/reset","PUT",l,!1);r.error(function(e){e.readyState&&console.log("connection error")}),r.done(function(t,l,o){if(100==t.type)console.log(t.type),window.location="#/";else if(t.message)console.log(t.message),e.afterLoginError="Invalid email  or password.",e.$apply();else{for(var r=0;r<t.errors.length;r++)e.afterLoginError=t.errors[r].message;e.$apply()}})}}}),angular.module("salesHubApp").controller("ForgotController",function(e,t,l){e.load=function(){t.formForgotDone=!1},e.load(),e.text="forgot page",e.email="",e.submitForgot=function(o){if(angular.forEach(e.frmForgot.$error.required,function(e){e.$setDirty()}),o.$valid){var r={Email:e.email},n=l.CallApi("/Forgot","POST",r,!1);n.error(function(e){console.log(e),e.readyState&&console.log("connection error")}),n.done(function(e,l,o){if(console.log(e),100==e.type)console.log(e.type),t.formForgotDone=!0,t.$apply();else if(e.message);else for(var r=0;r<e.errors.length;r++);})}}}),angular.module("salesHubApp").controller("RegisterController",function(e,t,l){e.company="",e.firstName="",e.lastName="",e.email="",e.password="",e.phone="",e.HMP=[{value:"Just Me"},{value:"2-5"},{value:"6-10"},{value:"11-30"},{value:"30-99"},{value:"We`re Huge(100+)"}],e.afterRegisterError="",e.registerForm=function(o){e.afterRegisterError="";var r=!1;if(angular.forEach(e.register.$error.required,function(e){e.$setDirty()}),o.$valid){r=e.checkfree?!0:!1;var n={Title:e.company,FirstName:e.firstName,LastName:e.lastName,Email:e.email,Password:e.password,Phone:e.phone,Size:e.selector,checkforfree:r},a=l.CallApi("/user","POST",n,!1);a.error(function(e){e.readyState&&console.log("connection error")}),a.done(function(l,o,r){if(100==l.type)console.log(l.type),t.setObject("currentUser",l.data),console.log(t.getObject("currentUser")),window.location="/dashboard.html#/inbox";else if(1==l.type)console.log(l.type),e.afterRegisterError=l.message,e.$apply();else if(l.message)console.log(l.message),"Duplicated email"==l.message&&(e.afterRegisterError=l.message,e.$apply());else{for(var n=0;n<l.errors.length;n++)console.log(l.errors[n].message);e.$apply()}})}},console.log(22),e.goLogin=function(){window.location="#/"}}),angular.module("salesHubApp").controller("InvitationsController",function(e,t,l,o,r,n,a){e.newUser={Email:r.email,Firstname:"",Lastname:"",Password:"",Phone:"",Organization:r.org},e.accept=function(){var t=a.CallApi("/invitations/accept","post",e.newUser,!1);t.error(function(e){console.log(e),e.readyState&&console.log("connection error")}),t.done(function(e,t,l){console.log(e),100==e.code?window.location="/":e.data?console.log(e.data):console.log(e)})}});