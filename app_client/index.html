<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Saleshub</title>
    <!--css-->
    <link rel="stylesheet" href="/css/bootstrap/bootstrap.min.css" />
    <link rel="stylesheet" href="/css/fontawesome/font-awesome.min.css" />
    <link rel="stylesheet" href="/lib/ui-grid.min.css" />

    <link rel="stylesheet" href="/ladda/ladda-themeless.min.css" />
    <link rel="stylesheet" href="/lib/angular-block-ui/angular-block-ui.min.css" />

    <link rel="stylesheet" href="/lib/angular-timeline/angular-timeline.css" />
    <link rel="stylesheet" href="/lib/angular-timeline/angular-timeline-bootstrap.css" />
    <link rel="stylesheet" href="/lib/angular-timeline/angular-timeline-animations.css" />
    <link rel="stylesheet" href="/lib/ng-tags-input/ng-tags-input.min.css" />
    <link rel="stylesheet" href="/lib/ng-tags-input/ng-tags-input.bootstrap.min.css" />

    <link rel="stylesheet" href="/stylesheets/style.css" />
    <link rel="stylesheet" href="/stylesheets/animate.css" />
    <!--<link rel="stylesheet" href="/css/style.css" />-->

  </head>
  <body ng-app="salesHubApp">
    <!-- MAIN CONTENT AND INJECTED VIEWS -->
    <div id="main">
        <toptoolbar></toptoolbar>
        <div class="container">
            <div class="content-area-wrap">
                <div id="sidebar-wrapper">
                    <left-navigation></left-navigation>
                </div>
                <div class="content-area">
                    <div class="content-area-inner">
                        <div class="app-top"></div>
                        <div class="app-content-wrap">
                            <div class="app-content">
                                <div class="app-content-inner">
                                    <div ng-view/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--angular js-->
    <script src="/js/general/angular.min.js"></script>
    <script src="/lib/angular-route.min.js"></script>
    <script src="/lib/angular-sanitize.min.js"></script>
    <script src="/lib/angular-animate.min.js"></script>
    <script src="/lib/ui-bootstrap-tpls-1.1.2.min.js"></script>
    <script src="/lib/smart-table.min.js"></script>
    <script src="/lib/angular-feature-toggle.min.js"></script>
    <script src="/lib/ng-tags-input/ng-tags-input.min.js"></script>
    <script src="/lib/ng-file-upload/ng-file-upload-shim.min.js"></script>
    <script src="/lib/ng-file-upload/ng-file-upload.min.js"></script>
    
    <!--<script type="text/javascript" src="angular/saleshub.min.js"></script>-->
    <script src="/app.js"></script>
    <!-- controllers -->
    <script src="/auth/login/login.controller.js"></script>
    <script src="/home/home.controller.js"></script>
    <script src="/leads/leads.controller.js"></script>
    <script src="/leads/newlead/newlead.controller.js"></script>
    <script src="/leads/lead/lead.controller.js"></script>
    <!-- services -->
    <script src="/common/services/accounts.service.js"></script>
    <script src="/common/services/leads.service.js"></script>
    <script src="/common/services/lead-events.service.js"></script>
    <script src="/common/services/emails.service.js"></script>
    <!-- directives -->
    <script src="/common/directives/toptoolbar/toptoolbar.controller.js"></script>
    <script src="/common/directives/toptoolbar/toptoolbar.directive.js"></script>
    <script src="/common/directives/leftNavigation/leftNavigation.controller.js"></script>
    <script src="/common/directives/leftNavigation/leftNavigation.directive.js"></script>
    <script src="/common/directives/contact/contact.controller.js"></script>
    <script src="/common/directives/contact/contact.directive.js"></script>
    <script src="/common/directives/leadProfile/leadProfile.controller.js"></script>
    <script src="/common/directives/leadProfile/leadProfile.directive.js"></script>
    <!-- filters -->
    <script src="/common/filters/formatContacts.filter.js"></script>
    <script src="/common/filters/formatCreatedAt.filter.js"></script>
    <script src="/common/filters/formatEmails.filter.js"></script>

    <script src="/js/general/jquery-1.11.1.min.js"></script>
    <script src="/jquery-validation/jquery.validate.min.js"></script>
    <script src="/jquery-validation/additional-methods.min.js"></script>
    <script src="/js/general/bootstrap/bootstrap.min.js"></script>
    <script src="/js/general/jquery.timeago.js"></script>
    
    <script src="/ladda/spin.min.js"></script>
    <script src="/ladda/ladda.min.js"></script>
    <script src="/lib/angular-ladda.min.js"></script>
    <script src="/lib/angular-block-ui/angular-block-ui.min.js"></script>
    <script src="/lib/angular-timeline/angular-scroll-animate.js"></script>
    <script src="/lib/angular-timeline/angular-timeline.js"></script>
    <script src="/lib/linq.min.js"></script>

    <script type="text/javascript">
        function guid() {
          function s4() {
            return Math.floor((1 + Math.random()) * 0x10000)
              .toString(16)
              .substring(1);
          }
          return s4() + s4() + s4() + s4() + s4() + s4() + s4() + s4();
        }
        function initGuid(array){
            for (var i = 0; i < array.length; i++) {
              array[i].uuid = guid();
            }
        }
        function clearAllArray(array){
          for (var i = array.length-1; i >= 0; --i) {
            array.splice(i, 1);
          }
        }

        function validateEmail(email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        }

        function validatePhone(phone) {
            // http://www.w3resource.com/javascript/form/phone-no-validation.php
            var re = /^\d*$/; 
            //console.log(re.test(phone));
            return re.test(phone);
        }

        function removeByUuid(targetArray, uuid){
            for (var i = 0; i < targetArray.length; i++) {
            if(uuid === targetArray[i].uuid){
                targetArray.splice(i, 1);
                break;
            }
          }
        }

        function removeByField(targetArray, field, value){
            for (var i = 0; i < targetArray.length; i++) {
            if(value === targetArray[i][field]){
                targetArray.splice(i, 1);
                break;
            }
          }
        }

        function EventModel(event, badgeClass, badgeIconClass){
            var self = this;
            var editing = false;
            var status = "";
            var haveBcc = false,
                haveCc = false;

            if(event.compose){
                if(event.compose.status == 'Draft'){
                    status = "draft";
                }
                if(event.compose.status == 'Send'){
                    status = "send";
                }
                if(event.compose.cc.length > 0){
                    haveCc = true;
                }
                if(event.compose.bcc.length > 0){
                    haveBcc = true;
                }
            }
            
            //console.log(event);
            return {
                uuid: guid(),
                _id: event._id,
                badgeClass: badgeClass,
                badgeIconClass: badgeIconClass,
                type: event.type,
                title: event.title,
                content: event.content,
                createdAt: event.createdAt,
                riaseFrom: event.riaseFrom,
                fullname: event.riaseFrom.profile.firstName + " " + event.riaseFrom.profile.lastName,
                name: event.riaseFrom.profile.firstName,
                compose: event.compose,
                status: status,
                uploading: false,
                newAttachs: [],
                isEditiong: function(){
                    return editing;
                },
                toggleEdit: function(){
                    editing = !editing;
                },
                beginEdit: function(){
                    editing = true;
                },
                endEdit: function(){
                    editing = false;
                },
                haveBcc: function(){
                    return haveBcc;
                },
                haveCc: function(){
                    return haveCc;
                },
                addCc: function(){
                    haveCc = true;
                },
                addBcc: function(){
                    haveBcc = true;
                },
                isReadonly: function(){
                    return status == 'send';
                }
            }
        }

        $(function(){
            jQuery.extend(jQuery.validator.messages, {
                required: "This field is required.",
                remote: "Please fix this field.",
                email: "Please enter a valid email address.",
                url: "Invalid URL.",
                date: "Please enter a valid date.",
                dateISO: "Please enter a valid date (ISO).",
                number: "Please enter a valid number.",
                digits: "Please enter only digits.",
                creditcard: "Please enter a valid credit card number.",
                equalTo: "Please enter the same value again.",
                accept: "Please enter a value with a valid extension.",
                maxlength: jQuery.validator.format("Please enter no more than {0} characters."),
                minlength: jQuery.validator.format("Please enter at least {0} characters."),
                rangelength: jQuery.validator.format("Please enter a value between {0} and {1} characters long."),
                range: jQuery.validator.format("Please enter a value between {0} and {1}."),
                max: jQuery.validator.format("Please enter a value less than or equal to {0}."),
                min: jQuery.validator.format("Please enter a value greater than or equal to {0}.")
            });

            $('[data-toggle="tooltip"]').tooltip();
        })
    </script>
  </body>
</html>